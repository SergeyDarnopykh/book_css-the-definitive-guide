# Chapter 1 CSS and Documents

## Elements

### Replaced and nonreplaced elements

In CSS, elements generally take two forms: replaced and nonreplaced.

**Replaced elementes** are those where the element's content is replaced by something that is not directly represented by document content.

*Examples:* 

```css
<img>, <input>
```



**Nonreplaced elements** - their content is presented by the browser inside a box generated by the element itself.

*Examples:* 

```css
<div>, <span>, <p>
```



### Element Display Roles

**Block-level elements** generate an element box that (by default) fills its parent element's content area and cannot have other elements at its sides.

*Examples:* 

```css
<div>, <p>
```



**Inline-level elements** generate an element box within a line of text and do not break up the flow of that line.

*Examples:* 

```css
<a>, <span>
```



`Note:` In HTML, block-level elements cannot descend from inline-level elements (be inside them).



## Bringing CSS and HTML Together

### Loading external css

```css
<link rel=stylesheet" type="text/css" href="my-sheet.css" media="screen, projection">
```

**type** is always set to *text/css*. This value describes the type of data that will be loaded using the *link* tag.

**href** - url of the stylesheet.



### Alternate stylesheets

```css
<link rel="stylesheet" type="text/css" href="sheet1.cc" title="Default">
<link rel="alternate stylesheet" type="text/css" href="bigtext.css" title="Big Text">
<link rel="alternate stylesheet" type="text/css" href="zany.css" title="Crazy colors!">
```

They are used only if selected by the user.

Users can pick the style they want to use, and the browser would switch from the first one, labeled "Default" in this case, to whichever the user picked.



WebKit browsers (Safari, Chrome) do not support alternate stylesheets.

Alerternate stylesheets can be grouped by the same title.

If the stylesheet doesn't have a title, then it is a *persistent stylesheet* and is always used.



### The style Element

```css
<style type="text/css">...</style>
```

Style should always use the attribute type; in the case of a CSS document, the correct value is `text/css`.

It is also possible to give the style element a *media* attribute.



The styles between the opening and closing style tags are referred to as the *document stylesheet* or the *embedded stylesheet*.



### The @import Directive

```css
@import url(sheet2.css);
```

It's very similar to `link`. The only major difference is in the syntax and placement of the command.

`@import` musti be places before the other CSS rules or it won't work at all.

`@import` doesn't provide stuff like *alternate stylesheets*.



As with link, you can restrict imported stylesheets to one or more media:

```css
@import url(sheet2.css) all;
@import url(blueworld.css) screen;
@import url(zany.css) projection, print;
```



### HTTP Linking

You can think associate CSS with a document via HTTP headers.

Under Apache, this can be accomplished by adding a reference to the CSS file in a *.htaccess* file:

```css
Header add Link "</ui/testing.css>;rel=stylesheet;type=text/css"
```

Alternatively, you can add an equivalent rule to the server's httpd.conf file:

```css
<Directory /path/to/ /public/html/directory>
Header add Link "</ui/testing.css>;rel=stylesheet;type=text/css"
</Directory>
```

HTTP linking is supported by Firefox and Opera.



### Inline Styles

```css
<p style="color: gray;">Lorem ipsum</p>
```

The style attribute can be assosiated with any HTML tag, except for those tags that are outside of body (for example, head or title).

You can place only a declaration block inside inline style attribute. You can't use any @import attributes, nor can you include any complete rules. The only thing you can put into the value of a style attribute is what might go between the curly braces of a rule.



## Stylesheet Contents

### Markup

There is no markup in stylesheets. The only exception is HTML comment markup.



### Structure of the css rule

![Structure of the rule](/Users/user/Projects/book_css-the-definitive-guide/Chapter 1/Structure of the rule.png)



### Vendor prefixing

These are a way for browser vendors to mark properties, values, or other bits of CSS as being experimental or proprietary (or both).

Examples:

`-epub-` - International Digital Publishing Forum ePUb format

`-moz-` - Mozilla-based browsers (e.g., Firefox)

`-ms-` - Microsoft Internet Explorer

`-o-` - Opera-based browsers

`-webkit-` - WebKit-based browsers (e.g., Safari and Chrome)



### Whitespace Handling

In general, CSS treats whitespace just like HTML does: any sequence of whitespace characters is collapsed to a single space for parsing purposes.



### CSS Comments

```css
/* This is a CSS comment */

/* Another great comment,
that can take multiple lines. */
```

Comments cannot be nested.

There's no "rest of the line" comment pattern such as `//` or `#`.



`Note:` CSS comments are treated by the CSS parser as if they do not exist at all, and so do not count as whitespace for parsing purposes. Therefore you can put them anywhere.



## Media queries

### Usage

They can be used in the following places:

- The media attribute of a link element
- The media attribute of a style element
- The media descriptor portion of an `@import` declaration

Queries can range from simple media types to complicated combinations of media types and features.



### Simple Media Queries

```css
@media projection {
    body {
        background: yellow;
    }
}
```

`@media` blocks can be placed anywhere in the stylesheet.



### Media Types

`all` - Used in all presentational media.

`print` - Used when printing the document for sighted users and also when displaying a print preview of the document.

`screen` - Used when presenting the document in a screen medium like a desktop computer monitor. All web browsers running on such systems are screen-medium user agents.

`projection` - Supported by some browsers, which allows a document to be presented as a slideshow.

`handheld` - Supported by  some mobile-device browsers.



Multiple media types can be specified using a comma-separated list:

```css
<link type="text/css" href"frobozz.css" media="screen, print">

@import url(frobozz.css) screen, print;
@media screen, print { ... }
```



### Media Descriptors

```css
<link href="print-color.css" type="text/css" media="print and (color), screen and (color-depth: 8)" rel="stylesheet">

@import url(print-color.css) print and (color), screen and (color-depth: 8);
```

Anywhere a media type can be used, a media query can be used.



#### Combining descriptors:

`and` - Links together two or more media features in such a way that all of them must be true for the query to be true.

```css
@media (color) and (orientation: landscape) and (min-device-width: 800px)
```

`,` in media queiries is equivalent to `or`

```css
@media (max-width: 700px), (orientation: landscape)
```

`not` - Negates the entire query. Can be used only at the beggining of the query. Is not supported by old browsers.

```css
@media not (color) and (orientation: landscape) and (max-device-width: 800px)
```

`only` - Used to hide a stylesheet from browsers too old to understand media queries. Can be used only at the beggining of a media query.



Each media descriptor is composed of a media type and one or more listed media features, with each media feature descriptor enclosed in parentheses. If no media type is provided, the it is assumed to be all, which makes the following two examples equivalent:

```css
@media all and (min-resolution: 96dpi) { ... }
@media (min-resolution: 96dpi) { ... }
```



## Feature Queries

**Feature query** - the ability to apply blocks of CSS when certain CSS property-value combinations are supported by the user agent.

Apply `display: grid` to element if it is supported property:

```css
@supports (display: grid) {
    section#main { display: grid; }
}
```

`Effect:` if you recognise and can do something with the property-value combination `display: grid`, apply these styles. Otherwise, skip these styles. In user ages that don't understand `@supports`, the entire block is skipped over.



Feature queries can be embeded inside each other, inside media queries and vice versa:

```css
@supports (display: flex) {
    @media screen {
        /* screen flexbox styles */
    }
    
    @media print {
        /* pring flexbox styles */
    }
}

@media screen and (max-width: 30em) and (orientation: landscape) {
    @supports (display: flex) {
        /* small-screen landscape flexbox styles */
    }
}

@media screen and (min-width: 30em) {
    @supports (display: flex) and (display: grid) {
        /* large-screen flexbox and grid styles */
    }
}
```



Feature queries supports `or`:

When WebKit supported CSS shapes only via vendor-prefixed properties, you could write something like this:

```css
@supports (shape-outside: circle()) or (-webkit-shape-outside: circle()) {
    /* shape styles */
}
```



Feature queries supports `not` too:

```css
@supports not (display: grid) {
    /* grid-not-supported styles */
}
```



Feature queries can be used to add new margins only when grid is supported:

```css
div#main { overflow: hidden; }
div.column { float: left; margin-right: 1em; }
div.column:last-child { margin-right: 0; }

@supports (display: grid) {
    div#main { display: grid; grid-gap: 1em 0; overflow: visible; }
    div#main div.columnn { margin: 0; }
}
```



Combining queries:

```css
@supports (color: black) and ((display: flex) or (display: grid)) {
    /* styles */
}
```

`Note:` the extra parentheses around the `or` are required! Without them, the expression won't work.



In feature query tests both *property* and *value* are required, because  browser can easily support a property without supporting all its values (e.g., `display: grid`).



`Note:` if the browser supports a feature, it doesn't mean that it will work without any bugs. Support just means that browser will understand that you've wrote in your code.
